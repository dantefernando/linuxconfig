#!/bin/sh

# Prints Spotify song title and artist to standard output for the dwmblocks statusbar
# Dependencies: Spotify and playerctl


# Returns the spotify song title and artist from playerctl
getTrack () {

	title=$(playerctl --player spotify metadata title)
	artist=$(playerctl --player spotify metadata artist)
	status=$(playerctl --player spotify status)

	if [ $? == 0 ] ; then

		case $status in
				"Playing") icon="üéµ" ;;
				"Paused") icon="‚è∏Ô∏è" ;;
		esac

	# [[ $title != "Advertisement" ]] && echo "$icon  $artist - $title "
		[[ -z $(playerctl --player spotify metadata | grep spotify:ad) ]] && echo "$icon  $artist - $title "
	fi

}

# If spotify is running, call getTrack function
getSpotify () {

	spotifyID=$(pgrep spotify)
	[[ -n $spotifyID ]] && echo $(getTrack)

}

getSpotify
